      - name: 3. „ÄêÂÖ®ÂüüÊêúÂØª„ÄëÊ∑∑ÂêàÈí©Â≠êÊé¢Êµã‰∏éÂàÜÊîØËá™ÈÄÇÂ∫îË°•‰∏Å
        run: |
          cd ${{ env.K_ROOT }}
          rm -rf drivers/kernelsu
          GKI_LIST=("https://github.com/simonpunk/KernelSU" "https://github.com/rifsxd/KernelSU-Next" "https://github.com/WildKernels/KernelSU")
          FOUND=false
          # Á¨¨‰∏ÄÈò∂ÊÆµÔºöÂØªÊâæÂéüÁîüÂ∏¶ HYBRID_HOOK ÁöÑÂàÜÊîØ
          for repo in "${GKI_LIST[@]}"; do
            for branch in next main hybrid-next gki-android14-6.6; do
              if curl -sL "${repo}/raw/${branch}/ksu/Kconfig" | grep -q "HYBRID_HOOK"; then
                echo "üéØ ÂåπÈÖçÊàêÂäüÂéüÁîüÊ∑∑ÂêàÈí©Â≠ê: $repo ÂàÜÊîØ: $branch"
                git clone -b "$branch" --depth=1 "$repo" drivers/kernelsu && FOUND=true && break 2
              fi
            done
          done

          # Á¨¨‰∫åÈò∂ÊÆµÔºö‰øùÂ∫ïÊñπÊ°à - Ëá™Âä®Êé¢ÊµãÂàÜÊîØÂπ∂ÂÆûÊñΩÊö¥ÂäõË°•‰∏Å
          if [ "$FOUND" = false ]; then
            echo "‚ö†Ô∏è Êú™ÂèëÁé∞ÂéüÁîüÂàÜÊîØÔºåÂêØÂä®Ëá™ÈÄÇÂ∫îÊö¥ÂäõË°•‰∏Å..."
            REPO_URL="https://github.com/rifsxd/KernelSU-Next"
            # Ëá™Âä®Êé¢ÊµãÊúâÊïàÂàÜÊîØÔºöÂÖàËØï nextÔºå‰∏çË°åËØï mainÔºåÂÜç‰∏çË°åËØï master
            for b in next main master; do
              git clone -b "$b" --depth=1 "$REPO_URL" drivers/kernelsu && FOUND_B=true && break
            done
            
            if [ "$FOUND_B" = true ]; then
              echo "‚úÖ Â∑≤ÊàêÂäüÂÖãÈöÜÂü∫Á°Ä‰ª£Á†ÅÔºåÂºÄÂßãÁâ©ÁêÜÁªáÂÖ•Ê∑∑ÂêàÈí©Â≠ê..."
              # Áâ©ÁêÜ‰øÆÊîπ Kconfig Â¢ûÂä†ÂºÄÂÖ≥
              sed -i '/config KSU_NEXT$/a \    bool "Enable Hybrid Hook"\n    default y' drivers/kernelsu/ksu/Kconfig
              # Êö¥ÂäõÂº∫Âà∂ÂºÄÂêØÊ∑∑ÂêàÈÄªËæë
              find drivers/kernelsu/ -name "*.c" | xargs sed -i 's/ifndef CONFIG_KSU_NEXT_HYBRID_HOOK/if 1 \/\/ Forced/g'
            else
              echo "‚ùå ‰∏•ÈáçÈîôËØØÔºöÊó†Ê≥ïÊãâÂèñ‰ªª‰ΩïÂü∫Á°ÄÈ©±Âä®ÂàÜÊîØ" && exit 1
            fi
          fi

      - name: 4. „ÄêÁã¨Á´ãÊ®°Âùó„ÄëÊ≥®ÂÖ• ADIOS Ë∞ÉÂ∫¶Âô® (ÂÖÅËÆ∏Â§±Ë¥•)
        continue-on-error: true # Âç≥‰Ωø sed Êä•Èîô‰πü‰∏çÂΩ±ÂìçÊï¥‰ΩìÁºñËØë
        run: |
          cd ${{ env.K_ROOT }}
          git clone --depth=1 https://github.com/firelzrd/adios kernel/sched/adios || true
          # Âä®ÊÄÅË∑ØÂæÑÊêúÁ¥¢ÔºåËß£ÂÜ≥ 1000022711 Êä•Èîô
          TARGET_K=$(find . -name "Kconfig" -path "*/sched/*" | head -n 1)
          TARGET_M=$(find . -name "Makefile" -path "*/sched/*" | head -n 1)
          if [ -n "$TARGET_K" ]; then
             echo "‚úÖ ÂèëÁé∞Ë∞ÉÂ∫¶Âô®ÈÖçÁΩÆË∑ØÂæÑ: $TARGET_K"
             echo 'obj-y += adios/' >> "$TARGET_M"
             sed -i '/endmenu/i source "kernel/sched/adios/Kconfig"' "$TARGET_K"
             # 6.6 Â§¥Êñá‰ª∂ÈÄÇÈÖç
             find kernel/sched/adios/ -type f -name "*.[ch]" | xargs sed -i 's/<linux\/sched\/rt.h>/<linux\/sched\/types.h>/g' || true
          fi

      - name: 5. „ÄêÁã¨Á´ãÊ®°Âùó„ÄëÊ≥®ÂÖ• Baseband-guard (BBG)
        run: |
          cd ${{ env.K_ROOT }}
          git clone --depth=1 https://github.com/vc-teahouse/Baseband-guard drivers/bbg
          echo 'obj-y += bbg/' >> drivers/Makefile
          echo 'source "drivers/bbg/Kconfig"' >> drivers/Kconfig
